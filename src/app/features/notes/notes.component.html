<div class="notes-editor" *ngIf="isEditing && currentNote; else emptyState">
  <div class="editor-toolbar">
    <div class="toolbar-left">
      <button class="format-btn" (click)="insertFormat('bold')" title="ç²—ä½“">
        <strong>B</strong>
      </button>
      <button class="format-btn" (click)="insertFormat('italic')" title="æ–œä½“">
        <em>I</em>
      </button>
      <button class="format-btn" (click)="insertFormat('code')" title="ä»£ç ">
        &lt;/&gt;
      </button>
      <button class="format-btn" (click)="insertFormat('list')" title="åˆ—è¡¨">
        â‰¡
      </button>
    </div>
    
    <div class="toolbar-right">
      <span class="save-status" *ngIf="isSaving">ä¿å­˜ä¸­...</span>
      <span class="save-status" *ngIf="!isSaving && lastSaved">{{ getLastSavedText() }}</span>
      
      <button class="action-btn" (click)="manualSave()" [disabled]="isSaving" title="æ‰‹åŠ¨ä¿å­˜">
        ä¿å­˜
      </button>
      <button class="action-btn sync-btn" (click)="syncNotes()" title="åŒæ­¥åˆ°äº‘ç«¯">
        åŒæ­¥
      </button>
    </div>
  </div>


  <div class="note-title-container">
    <input 
      type="text" 
      class="note-title-input"
      [(ngModel)]="currentNote.title"
      (input)="onTitleChange(currentNote.title)"
      placeholder="ç¬”è®°æ ‡é¢˜..."
      maxlength="100">
  </div>


  <div class="note-content-container">
    <textarea 
      class="note-content"
      [(ngModel)]="currentNote.content"
      (input)="onContentChange(currentNote.content)"
      placeholder="å¼€å§‹å†™ä¸‹ä½ çš„æƒ³æ³•..."
      rows="20">
    </textarea>
  </div>


  <div class="note-info">
    <div class="note-meta">
      <span *ngIf="currentNote.createdAt">
        åˆ›å»ºäº: {{ currentNote.createdAt | date:'yyyy-MM-dd HH:mm' }}
      </span>
      <span *ngIf="currentNote.updatedAt">
        æ›´æ–°äº: {{ currentNote.updatedAt | date:'yyyy-MM-dd HH:mm' }}
      </span>
      <span>
        å­—æ•°: {{ currentNote.content?.length || 0 }}
      </span>
    </div>
  </div>
</div>

<ng-template #emptyState>
  <div class="empty-editor">
    <div class="empty-content">
      <div class="empty-icon">ğŸ“</div>
      <h3>é€‰æ‹©ä¸€ç¯‡ç¬”è®°å¼€å§‹ç¼–è¾‘</h3>
      <p>ä»å·¦ä¾§åˆ—è¡¨ä¸­é€‰æ‹©ç¬”è®°ï¼Œæˆ–åˆ›å»ºä¸€ç¯‡æ–°ç¬”è®°</p>
    </div>
  </div>
</ng-template>
